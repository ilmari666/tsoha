{% extends "layout.html" %}

{% block body %}

{% if current_user.is_authenticated %}
<a href="{{ url_for('collection_new_form') }} ">Add a collection</a>
{% endif %}





{% if current_user.is_authenticated and current_user.is_admin() %}

<table>
    <tr>
      <th>Name</th>
      <th>Author</th>
    </tr>

    {% for collection in collections %}
      {% if collection.public %}
          <tr>
              <td><a href="{{ url_for('collections_view', collection_id=collection.id) }}">{{ collection.name }}</a></td>
          <td>{{ collection.author.name }}</td>
          <td>
          <form method="GET" action="{{ url_for('collection_set_private', collection_id=collection.id) }}">
            <input type="submit" value="Hide"/>
          </form>
          </td>
        </tr>
      {% else %}
              <tr>

            <td>{{ collection.name }}</td>
            <td>{{ collection.author.name }}</td>
            <td>
            <form method="GET" action="{{ url_for('collection_set_public', collection_id=collection.id) }}">
              <input type="submit" value="Publish"/>
            </form>
          </td>
        </tr>
      {% endif %}  
      </td>
    </tr>
    {% endfor %}
  </table>
  {% else %}
  <PRE>
-=[COLLECTION / AUTHOR)]======================================================-{% for collection in collections %}{% if collection.public %}
 <a href="{{ url_for('collections_view', collection_id=collection.id) }}">{{ collection.name.ljust(45, ' ')  }}</a>| {{ collection.author.name }}</td>
----------------------------------------------+--------------------------------{% endif %}{% endfor %}
    </PRE>
  
  {%endif %}
{% endblock %}
